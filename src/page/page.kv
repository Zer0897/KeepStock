#:kivy 1.10.1

#:import screenmanager kivy.uix.screenmanager


<SplashPage>:
    name: 'splash'
    LoginPage:
        id: login


<LoginPage>:
    name: 'login'
    form: form
    BoxLayout:
        orientation: 'vertical'

        AnchorLayout:
            size_hint: 1, .4
            anchor_y: 'top'

            TitleLabel:
                text: 'KeepStock'

        AnchorLayout:
            halign: 'center'
            Form:
                id: form
                entries: ['Username', 'Password']
                private: ['Password']
                required: self.entries

        AnchorLayout:
            anchor_y: 'bottom'
            size_hint: 1, .6

            PrimaryButton:
                text: 'Submit'
                on_press: root.parent.manager.current = 'menu'


<MenuPage>:
    name: 'menu'

    PrimaryView:
        ScreenManager:
            id: manager
            current: 'view'
            ViewPage:
            EditPage:
            InPage:
            OutPage:

        NavigationBar:
            id: navbar
            manager: manager
            size_hint_y: None
            height: '130sp'
            items: ['Edit', 'In', 'Out', 'View']


<BaseView>:
    orientation: 'vertical'
    title: ""


<SecondaryView>:
    canvas:
        Color:
            rgba: secondary_color
        Rectangle:
            pos: self.pos
            size: self.size


<ViewPage>:
    name: 'view'
    BoxLayout:
        orientation: 'vertical'
        HeaderBar:
            id: header
            title: root.name.title()
            size_hint_y: None
            height: '40sp'

            NavigationBar:
                manager: manager
                items: ['Shelf', 'Me','1', '2', '3']

        ScreenManager:
            id: manager
            transition: screenmanager.SlideTransition(direction='up')

            InventoryPage:
                name: 'shelf'
                text: self.name.title()

            InventoryPage:
                name: '1'
                text: self.name.title()

            InventoryPage:
                name: '2'
                text: self.name.title()

            InventoryPage:
                name: '3'
                text: self.name.title()

            InventoryPage:
                name: 'me'
                text: self.name.title()



<InventoryPage@Screen>:
    text: ''
    BoxLayout:
        PrimaryLabel:
            text: root.text
            size_hint_x: None
            width: '50sp'
        SecondaryView:


<EditPage>:
    name: 'edit'
    title: self.name.title()
    SecondaryView:
        id: view
        title: root.title


<InPage>:
    name: 'in'
    title: self.name.title()
    SecondaryView:
        id: view
        title: root.title

<OutPage>:
    name: 'out'
    title: self.name.title()
    SecondaryView:
        id: view
        title: root.title

        AnchorLayout:

            Scanner:
                id: scanner
                # play: True
                # resolution: self.size

        AnchorLayout:
            PrimaryButton:
                text: "Capture"
                size_hint: .4, .4
                on_press:
                    camera.play = not camera.play

        AnchorLayout:
            PrimaryLabel:
                text: ", ".join([str(symbol.data) for symbol in scanner.symbols])

